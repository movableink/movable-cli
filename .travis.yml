sudo: false
dist: trusty

addons:
  chrome: stable

language: node_js

node_js:
  - '12'
  - '13'

branches:
  only:
    - master
    - beta
    - release
    - auto
    - '/^greenkeeper.*$/'

cache:
  yarn: true
  directories:
    - '$HOME/.npm'
    - '$HOME/.cache'

matrix:
  fast_finish: true

env:
  global:
    - secure: 'qc/2RS9pD5+KHw5bzjdO/0e/WkPrcRWlP8JRDM6FLrEqgpnVPIUwmyjT9tN7mNVDpDmLQdjIfyGLqph+mmTRciO6zCXvzkFOBSQmIrCutuUak0+8ADNsBQ7C9oGWPgpoDT3+EJlnFWWyLvu3H7Ap/j/tfW88Uz/SX2XxTFJhQBWwCepnVFTLgRFkN4pbMb/pKcpyGZpOpdezNbh+g2FSz3mdGBUWhok0MR+d/QQOxrZ8+XwT1OB4LccG3rFh0iSNB1BoISH88JWkbhtnXfbnJ9mwFGUJkmoz6BscR72Ysq1vq1kOStWIwOq+NzyJ29P970FI/KyAhizzAQ88rMHZhG29GcolAQvywoMeb5rzkMBCXjoa43gIYwTAYPI9o0SEJEOOzs58Elhn7dXGtTVSw8iyqtIH8K8AyRFqkGyb4g39bAmJqDE/N+CHV7cq/LnynVBkVHn2J53XEf0IU/YQ29U1ypfO7h83QuTX1wjs+oL/lGamrLyb1G5VIlS4jvkKi/dcoP6MWmnxsghndyIro1uU+MyuvEDLprjI42a+LLH8v9e8U+DQKSI+5zJmMG20GV4vuDBoxHur/LKXfaxFUUTfuH3x2FLgUddbKjjfE6GEE+gKfrZr1ZtIOMW4IWy7d6WoeosTXZEGgkOXjQ6O5Z2iEMAlOvnQ3N3Er8L4Tw0=' #PACKAGE_CLOUD_TOKEN

before_install:
  - curl -o- -L https://yarnpkg.com/install.sh | bash
  - export PATH=$HOME/.yarn/bin:$PATH
  - curl -s "https://${PACKAGE_CLOUD_TOKEN}:@packagecloud.io/install/repositories/movableink/studio/script.node.sh" | force_npm=1 bash

script:
  - yarn run test
  - yarn run test:beta
